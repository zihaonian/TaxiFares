## 项目概述

本项目旨在设计并实现一款基于FPGA（现场可编程门阵列）的出租车计价系统，该系统能够自动计算乘客的车费，并在数码管上显示当前的行驶里程和费用。同时，系统还能够模拟出租车的运行过程，包括起步价、里程费用和等待费用的计算，以及相应的LED指示器状态显示和计时器功能。

## 文件结构

```
Taxi_fares/
│
├── doc/              # 存放时序图与模块框图文件
├── quartus_prj/      # 存放quartus工程文件
│
├── rtl/              # 存放rtl模块文件
│   ├── top_taxi_fares.v        # 系统顶层模块
│   ├── Stepper_motors.v        # 步进电机驱动模块
│   ├── seg_dynamic.v           # 动态数码管驱动模块
│   ├── price_cnt.v             # 计价器模块
│   ├── key_filter.v            # 电机模块驱动模块
│   ├── hc595_ctrl.v            # HC595驱动模块
│   ├── distance_cnt.v          # 里程计模块
│   └── binary2bcd_216.v        # 二进制转bcd码模块
├── sim/              # 存放test_bench文件				
└── README.md         #本文档，提供项目概述、模块说明、功能简介等信息
```

## **模块说明**

1. **top_taxi_fares：** 顶层模块，将所有子模块连接在一起，并定义了输入和输出端口。
2. **key_filter：** 根据系统时钟过滤按键输入，以确保稳定的按键信号。在一定时间内检测到按键按下，则产生一个标志信号。
3. **Stepper_motors：** 控制步进电机以模拟出租车的运行过程。根据启动和步进按键的状态，更新步进电机的驱动信号。
4. **distance_cnt：** 根据红外传感器模拟里程编码器的信号，计算出租车的行驶距离。
5. **price_cnt：** 根据行驶距离和计时器的时间，计算出租车的行程费用。
6. **binary2bcd_216：** 将计算得到的行驶距离和费用转换为BCD格式，以便在数码管上显示。
7. **seg_dynamic：** 控制数码管的显示，根据行驶距离和费用的BCD码和当前显示的位置进行动态刷新。
8. **hc595_ctrl：** 控制HC595芯片，将数码管的动态显示数据转换为并行信号输出。

## **功能简介**

1. **起步价计费：** 当出租车启动时，系统开始计费，根据设定的起步价进行计费，起步LED点亮表示计费已启动。
2. **按里程计费：** 当出租车行驶超过3公里后，系统开始根据每公里的费用进行计费。通过模拟出租车行驶过程中的里程编码器信号，实时更新行驶距离，并根据距离计算费用。
3. **停车等待费用计费：** 当出租车停车等待时，系统根据停车等待的时间进行计费。每等待一小时，收取固定的停车等待费用，停车等待LED点亮表示计时器已启动。
4. **数码管显示：** 使用数码管实时显示出租车的行驶距离和当前费用，分别显示公里数和价格。根据行驶距离和费用，动态刷新数码管的显示内容。
5. **步进电机模拟运行：** 使用步进电机模拟出租车的运行过程，根据起步和步进按键的状态控制步进电机的运行，每转动一圈表示行驶一公里。
